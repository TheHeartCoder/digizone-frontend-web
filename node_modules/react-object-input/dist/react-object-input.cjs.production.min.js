"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n,e=require("react"),r=(n=e)&&"object"==typeof n&&"default"in n?n.default:n;function t(){return(t=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}return n}).apply(this,arguments)}exports.ObjectInput=function(n){var u=n.obj,c=n.onChange,o=n.renderItem,i=n.renderAdd,a=void 0===i?function(n){return r.createElement("button",{onClick:n},"Add item")}:i,f=n.renderEmpty,d=e.useState(Math.random())[1],l=e.useCallback((function(){return d(Math.random)}),[]),s=e.useRef([]),p=e.useCallback((function(){s.current.push([void 0,void 0]),l()}),[l]);return s.current=s.current.filter((function(n){var e=n[0];return!(e&&n[1]&&!(e in u))})).map((function(n){var e=n[0],r=n[1];return[e,e&&r&&u[e]!==r?u[e]:r]})),Object.keys(u).forEach((function(n){s.current.find((function(e){return e[0]===n}))||s.current.push([n,u[n]])})),r.createElement(r.Fragment,null,f&&!s.current.length?f():null,s.current.map((function(n,e){var u=n[0],i=n[1];return r.createElement(r.Fragment,{key:e},o(u||"",i,(function(n){-1!==s.current.findIndex((function(e){return e[0]===n}))&&i||(s.current[e]=[n,i],c((function(e){var r=t({},e);return i&&(r[n]=i,"string"==typeof u&&delete r[u]),r})))}),(function(n){void 0===i&&-1!==s.current.findIndex((function(n){return n[0]===u&&void 0!==n[1]}))||(s.current[e]=[u,n],"string"==typeof u?c((function(e){var r;return t(t({},e),{},((r={})[u]=n,r))})):l())}),(function(){s.current.splice(e,1),c((function(n){var e=t({},n);return"string"==typeof u&&delete e[u],e}))})))})),a(p))};
//# sourceMappingURL=react-object-input.cjs.production.min.js.map
